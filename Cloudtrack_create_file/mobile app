import { PublicClientApplication } from "@azure/msal-browser";
// import { Capacitor } from "@capacitor/core";

// const isNative = Capacitor.isNativePlatform();

export const msalConfig = {
  auth: {
    clientId: import.meta.env.VITE_AZURE_CLIENT_ID,
    authority: import.meta.env.VITE_AZURE_AUTHORITY_URL,
    redirectUri: "cloudtrack://auth",
    // redirectUri: isNative
    //   ? "cloudtrack://auth" // for mobile app
    //   : import.meta.env.VITE_AZURE_REDIRECT_URL, // for web build
    navigateToLoginRequestUrl: false,
  },
  cache: {
    cacheLocation: "localStorage",
    storeAuthStateInCookie: false,
  },
};

export const msalInstance = new PublicClientApplication(msalConfig);
